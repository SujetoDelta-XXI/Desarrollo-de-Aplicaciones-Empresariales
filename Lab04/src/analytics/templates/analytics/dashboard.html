{% extends "analytics/base_analytics.html" %}
{% block title %}Dashboard | Analytics{% endblock %}

{% block content %}
<h2 class="mb-4">📊 Dashboard</h2>
<div class="row g-4">
    <div class="col-md-4">
        <div class="card p-3 text-center bg-light">
            <h5>Total Book Views</h5>
            <h2>{{ total_views }}</h2>
        </div>
    </div>
</div>

<h4 class="mt-5">🔥 Top 5 Most Viewed Books</h4>
<ul class="list-group mb-4">
    {% for book in top_books %}
    <li class="list-group-item">{{ book.title }}</li>
    {% empty %}
    <li class="list-group-item">No data available</li>
    {% endfor %}
</ul>

<h4>👥 Top Authors by Views</h4>
<ul class="list-group mb-4">
    {% for author in top_authors %}
    <li class="list-group-item">{{ author.author.name }} - {{ author.total_views }} views</li>
    {% empty %}
    <li class="list-group-item">No data available</li>
    {% endfor %}
</ul>

<h4>🏷️ Top Categories</h4>
<ul class="list-group">
    {% for cat in category_stats %}
    <li class="list-group-item">{{ cat.category.name }} - Score: {{ cat.popularity_score }}</li>
    {% empty %}
    <li class="list-group-item">No data available</li>
    {% endfor %}
</ul>
{% endblock %}
